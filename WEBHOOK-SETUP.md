# ๐ Webhook Setup Guide

## โ ุงูู Webhook ุจูู ูุชุญูุธ ูุน ูู User!

### ููููุฉ ุงูุงุณุชุฎุฏุงู:

#### 1. ุณุฌู ุฏุฎูู ููู App:
๐ **http://localhost:5177/**

#### 2. ุงูุชุญ ุงูุฅุนุฏุงุฏุงุช:
- ุงุถุบุท ุนูู โ๏ธ (Settings) ูู ุงูู sidebar

#### 3. ุญุท ุงูู Webhook URL:
- ูู ูุณู **"n8n Webhook"**
- ุญุท ุงูู URL ุจุชุงุนู ูู ุงูู input
- ูุซุงู: `https://your-n8n.com/webhook/whatsapp-send`
- ุงุถุบุท **"Save Webhook URL"**

#### 4. ุฎูุงุต! ๐
- ุงูู URL ุงุชุญูุธ ูุน ุงูู account ุจุชุงุนู
- ููุง ุชุจุนุช ุฑุณุงูุฉุ ูุชุฑูุญ ุนูู ุงูู webhook ุฏู
- ูู ุดููุช ุงูู URLุ ุงูุฑุณุงูู ูุด ูุชุชุจุนุช ุนูู WhatsApp (ุจุณ ูุชุชุณุฌู ูู ุงูู database)

---

## ๐ ููู ูุดุชุบู:

### ุนูุฏ ุฅุฑุณุงู ุฑุณุงูุฉ:
1. ุงูู app ูุฌูุจ ุงูู webhook URL ูู ุงูู settings ุจุชุงุนุชู
2. ูู ููุฌูุฏุ ูุจุนุช POST request ููู webhook
3. ูุญูุธ ุงูุฑุณุงูุฉ ูู ุงูู database
4. ูุญุฏุซ ุงูู contact's last_message_at

### ุงูุจูุงูุงุช ุงููู ุจุชุฑูุญ ููู webhook:
```json
{
  "phone": "+1234567890",
  "text": "ูุต ุงูุฑุณุงูุฉ",
  "media_url": "https://...supabase.co/storage/...",
  "media_type": "image/jpeg"
}
```

---

## ๐ฏ Features:

### โ ูู User ูู webhook ุฎุงุต:
- ูู ูุงุญุฏ ูุญุท ุงูู URL ุจุชุงุนู
- ุงูู URL ูุชุญูุธ ูู ุงูู database
- ูุด ูุญุชุงุฌ ุชุนุฏู ูู ุงูู .env

### โ ุณูู ุงูุชุนุฏูู:
- ุบููุฑ ุงูู URL ูู ุงูู Settings
- ุงุญูุธ
- ุฎูุงุต!

### โ ุงุฎุชูุงุฑู:
- ูู ูุด ุนุงูุฒ webhookุ ุณูุจ ุงูู field ูุงุถู
- ุงูู app ููุดุชุบู ุนุงุฏู
- ุงูุฑุณุงูู ูุชุชุณุฌู ูู ุงูู database ุจุณ

---

## ๐ Database Schema:

### user_settings table:
```sql
- id: UUID
- user_id: UUID (unique)
- webhook_url: TEXT
- notifications_enabled: BOOLEAN
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

### Row Level Security:
- ูู user ูุดูู settings ุจุชุงุนุชู ุจุณ
- ูุญุฏุด ููุฏุฑ ูุดูู ุฃู ูุนุฏู settings ุญุฏ ุชุงูู

---

## ๐ ุงูุฃูุงู:

- โ RLS enabled
- โ ูู user ูู settings ุฎุงุตุฉ
- โ ุงูู webhook URL ูุด ุธุงูุฑ ูุญุฏ ุชุงูู
- โ ูุชุญูุธ encrypted ูู ุงูู database

---

## ๐ ูู ุญุงุฌุฉ ุฌุงูุฒุฉ!

**ุฌุฑุจ ุฏูููุชู:**
1. ุงูุชุญ Settings
2. ุญุท webhook URL
3. ุงุญูุธ
4. ุงุจุนุช ุฑุณุงูุฉ
5. ุดูู ุงูู webhook ูู n8n!

**ุงุณุชูุชุน! ๐**

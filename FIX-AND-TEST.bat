@echo off
chcp 65001 > nul
cls

echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                                                               â•‘
echo â•‘          ðŸ”§ FIX ORDERS - COMPLETE SOLUTION ðŸ”§                 â•‘
echo â•‘                                                               â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo.
echo ðŸ“‹ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø³ÙŠÙ‚ÙˆÙ… Ø¨Ù€:
echo    âœ“ Ø¥Ø±Ø´Ø§Ø¯Ùƒ Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù€ Database
echo    âœ“ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ Backend
echo    âœ“ Ø§Ø®ØªØ¨Ø§Ø± ÙƒØ§Ù…Ù„ Ù„Ù„Ù€ Orders
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

:STEP1
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  Ø§Ù„Ø®Ø·ÙˆØ© 1ï¸âƒ£: Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù€ Database                               â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ðŸ“ Ø§ÙØªØ­ Supabase ÙˆØ´ØºÙ„ Ø§Ù„Ù€ SQL:
echo.
echo    1. Ø±ÙˆØ­: https://rmpgofswkpjxionzythf.supabase.co
echo    2. Ø§Ø¶ØºØ· "SQL Editor" Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
echo    3. Ø§Ø¶ØºØ· "New query"
echo    4. Ø§ÙØªØ­ Ù…Ù„Ù: FIX-ORDERS-NOW.sql
echo    5. Ø§Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Ctrl+A Ø«Ù… Ctrl+C)
echo    6. Ø§Ù„ØµÙ‚Ù‡ ÙÙŠ Supabase
echo    7. Ø§Ø¶ØºØ· "Run" Ø£Ùˆ F5
echo.
echo ðŸ’¡ Ù„Ø§Ø²Ù… ØªØ´ÙˆÙ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:
echo    âœ… Database is ready! All tables configured correctly.
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

set /p sql_done="Ù‡Ù„ Ø´ØºÙ„Øª Ø§Ù„Ù€ SQL Ø¨Ù†Ø¬Ø§Ø­ØŸ (Y/N): "
if /i not "%sql_done%"=="Y" (
    echo.
    echo âš ï¸  Ù„Ø§Ø²Ù… ØªØ´ØºÙ„ Ø§Ù„Ù€ SQL Ø§Ù„Ø£ÙˆÙ„!
    echo.
    echo ðŸ“‚ Ø§Ù„Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ: wahtsapp-main\FIX-ORDERS-NOW.sql
    echo.
    pause
    goto STEP1
)

echo.
echo âœ… ØªÙ…Ø§Ù…! Ø§Ù„Ù€ Database Ø¬Ø§Ù‡Ø²
echo.

:STEP2
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  Ø§Ù„Ø®Ø·ÙˆØ© 2ï¸âƒ£: ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ Backend                                â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ðŸš€ Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±...
echo.

cd server
start "ðŸ–¥ï¸ Backend Server - Orders Fixed" cmd /k "echo. && echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— && echo â•‘              BACKEND SERVER - ORDERS FIXED                    â•‘ && echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• && echo. && echo ðŸ’¡ Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù€ logs Ù‡Ù†Ø§ Ù„Ù…Ø§ ØªØ¹Ù…Ù„ order Ø¬Ø¯ÙŠØ¯ && echo. && node webhook-server-simple.js"
cd ..

echo âœ… Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø¯Ø£ ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†ÙØµÙ„Ø©
echo.
echo â³ Ø§Ù†ØªØ¸Ø§Ø± 5 Ø«ÙˆØ§Ù†ÙŠ Ù„Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¨Ø¯Ø£...
timeout /t 5 /nobreak > nul
echo.

:STEP3
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚  Ø§Ù„Ø®Ø·ÙˆØ© 3ï¸âƒ£: Ø§Ø®ØªØ¨Ø§Ø± ÙƒØ§Ù…Ù„                                      â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ðŸ§ª Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ Database ÙˆØ§Ù„Ù€ Connections...
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

node test-shopify-complete.js

echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo ðŸ§ª Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ Webhook Ø¨Ù€ order ØªØ¬Ø±ÙŠØ¨ÙŠ...
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

node test-webhook-direct.js

echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

:RESULTS
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                    ðŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬                                 â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£Ø¹Ù„Ø§Ù‡:
echo.
echo âœ… Ù„Ùˆ ÙƒÙ„ Ø­Ø§Ø¬Ø© Ø®Ø¶Ø±Ø§Ø¡:
echo    â†’ Ø§Ù„Ù€ Orders Ù‡ØªØ´ØªØºÙ„ Ø¯Ù„ÙˆÙ‚ØªÙŠ!
echo    â†’ Ø¬Ø±Ø¨ ØªØ¹Ù…Ù„ order Ù…Ù† Shopify
echo    â†’ Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù€ server logs ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©
echo    â†’ Ø´ÙˆÙ Ø§Ù„Ù€ order ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Orders page)
echo.
echo âŒ Ù„Ùˆ ÙÙŠ Ù…Ø´Ø§ÙƒÙ„:
echo    â†’ Ø´ÙˆÙ Ø§Ù„Ù€ error messages Ø£Ø¹Ù„Ø§Ù‡
echo    â†’ Ø§ÙØªØ­ Ù…Ù„Ù: COMPLETE-FIX-GUIDE.md
echo    â†’ Ø§ØªØ¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

:VERIFY
echo ðŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬:
echo.
echo 1ï¸âƒ£  Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù€ server logs ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©
echo     Ù„Ø§Ø²Ù… ØªØ´ÙˆÙ: "âœ… Order saved to database"
echo.
echo 2ï¸âƒ£  Ø§ÙØªØ­ Supabase â†’ Table Editor â†’ shopify_orders
echo     Ù„Ø§Ø²Ù… ØªÙ„Ø§Ù‚ÙŠ order Ø¬Ø¯ÙŠØ¯ (Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)
echo.
echo 3ï¸âƒ£  Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â†’ Orders page
echo     Ù„Ø§Ø²Ù… ØªØ´ÙˆÙ Ø§Ù„Ù€ order Ø¸Ø§Ù‡Ø±
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

set /p verify="Ù‡Ù„ Ø§Ù„Ù€ order Ø¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù€ Database ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ØŸ (Y/N): "
if /i "%verify%"=="Y" (
    echo.
    echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    echo â•‘                                                               â•‘
    echo â•‘              ðŸŽ‰ ØªÙ… Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø¨Ù†Ø¬Ø§Ø­! ðŸŽ‰                         â•‘
    echo â•‘                                                               â•‘
    echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo âœ… Ø§Ù„Ù€ Orders Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø´ØºØ§Ù„Ø©!
    echo.
    echo ðŸ’¡ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
    echo    1. Ø´ØºÙ„ ngrok: ngrok http 3001
    echo    2. Ø³Ø¬Ù„ Ø§Ù„Ù€ webhook ÙÙŠ Shopify Admin
    echo    3. Ø§Ø¹Ù…Ù„ order Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† Shopify
    echo    4. Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù€ server logs
    echo    5. Ø´ÙˆÙ Ø§Ù„Ù€ order ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    echo.
    echo ðŸ–¥ï¸  Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø³Ù‡ Ø´ØºØ§Ù„ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©
    echo     Ù„Ùˆ Ø¹Ø§ÙŠØ² ØªÙˆÙ‚ÙÙ‡ØŒ Ø§Ø¶ØºØ· Ctrl+C
    echo.
) else (
    echo.
    echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    echo â•‘                                                               â•‘
    echo â•‘              âš ï¸  ÙÙŠ Ù…Ø´ÙƒÙ„Ø© Ù…Ø­ØªØ§Ø¬Ø© Ø­Ù„ âš ï¸                       â•‘
    echo â•‘                                                               â•‘
    echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo ðŸ“‹ Ø®Ø·ÙˆØ§Øª Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:
    echo.
    echo 1ï¸âƒ£  Ø´ÙˆÙ Ø§Ù„Ù€ server logs ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©
    echo     Ø§Ø¨Ø­Ø« Ø¹Ù†: "âŒ Error" Ø£Ùˆ "âš ï¸  Warning"
    echo.
    echo 2ï¸âƒ£  Ø´ÙˆÙ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡
    echo     Ø§Ø¨Ø­Ø« Ø¹Ù†: "âŒ" Ø£Ùˆ "âš ï¸"
    echo.
    echo 3ï¸âƒ£  Ø§ÙØªØ­ Ù…Ù„Ù: COMPLETE-FIX-GUIDE.md
    echo     ÙÙŠÙ‡ Ø­Ù„ÙˆÙ„ Ù„ÙƒÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
    echo.
    echo 4ï¸âƒ£  Ù„Ùˆ Ù…Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ Ø§Ø¨Ø¹Øª:
    echo     - Screenshot Ù…Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    echo     - Screenshot Ù…Ù† Ø§Ù„Ù€ server logs
    echo     - Screenshot Ù…Ù† Supabase shopify_orders
    echo.
)

echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo Press any key to exit...
pause > nul

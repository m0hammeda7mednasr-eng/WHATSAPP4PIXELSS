# ๐ฏ ุงูุญู ุงูููุงุฆู ุงูุฃุฎูุฑ

## ุงููุถุน ุงูุญุงูู

### โ ุงููู ุดุบุงู:
- ุงูุฑุณุงูุฉ ุจุชูุตู ุนูู WhatsApp โ
- ุงูุนููู ุจูุดูู ุชูุงุตูู ุงูุฃูุฑุฏุฑ โ
- ุงูุนููู ุจูุถุบุท "ุชุฃููุฏ" โ
- ุงูุฑุฏ ุจููุตู ("ุจู") โ

### โ ุงููุดุงูู:
- ุงูุฑุณุงูุฉ ูู ุงูู CRM: "Template: moon_order_confirmation" (ูุด ูุงุถุญุฉ)
- Token ุงูุชูู ุชุงูู
- ุงูุฑุณุงุฆู ูุด ุจุชุธูุฑ ุจุดูู ูุงูู

---

## ๐ง ุงูุญู ุงููุงูู

### ุงููุดููุฉ ุงูุฃุณุงุณูุฉ: WhatsApp Token

**Temporary Token ุจููุชูู ูู 24 ุณุงุนุฉ!**

ูุงุฒู ุชุนูู ูุงุญุฏ ูู ุงุชููู:

#### ุงูุญู 1: ุญุฏุซ Token ูุฏูู (ูู ููู)

```bash
node quick-update-token.js
```

ุฃู ูู ุงูู CRM:
1. Settings โ Profile & WhatsApp
2. Edit ุงูุจุฑุงูุฏ
3. ุงูุตู Token ุฌุฏูุฏ
4. Save

#### ุงูุญู 2: ุงุณุชุฎุฏู Permanent Token (ููุตู ุจู!)

**ุงูุฎุทูุงุช:**

1. ุงูุชุญ: https://business.facebook.com/settings/system-users

2. ุงุถุบุท **Add** โ ุงุนูู System User ุฌุฏูุฏ

3. ุงุฏููู ุตูุงุญูุงุช: **Admin**

4. ุงุถุบุท **Generate New Token**

5. ุงุฎุชุงุฑ ุงูู App ุจุชุงุนู

6. ุงุฎุชุงุฑ Permissions:
   - `whatsapp_business_management`
   - `whatsapp_business_messaging`

7. Token Expiration: **Never** โ๏ธ ููู!

8. ุงุถุบุท **Generate Token**

9. ุงูุณุฎ ุงูู Token

10. ุญุทู ูู ุงูู CRM (Settings โ Profile & WhatsApp)

**โ ุงูู Token ุฏู ูุด ุจููุชูู ุฃุจุฏุงู!**

---

## ๐ฑ ุญู ูุดููุฉ ุนุฑุถ ุงูุฑุณุงุฆู ูู ุงูู CRM

ุงููุดููุฉ ุฅู ููุง ูุณุชุฎุฏู Templateุ ุจูุญูุธ "Template: moon2" ุจุณ.

**ุงูุญู:** ูุญูุธ ููุฎุต ุงูุฑุณุงูุฉ ุจุฏู ุงุณู ุงูู Template.

---

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ (ุจุงูุชุฑุชูุจ)

### 1. ุงุญุตู ุนูู Permanent Token

**ูู Meta Business Manager:**
- System Users โ Generate Token
- Never expires
- ุงูุณุฎู

### 2. ุญุฏุซ Token ูู ุงูู CRM

```
Settings โ Profile & WhatsApp โ Edit โ Save
```

### 3. ูุนู Template ูู Settings

```
Settings โ Message Templates
Template Name: moon2
Language: en
Use Template: โ ON
Save
```

### 4. ุดุบู SQL ูู Supabase (ูู ูุด ูุดุบูู)

```sql
ALTER TABLE messages ADD COLUMN IF NOT EXISTS order_id UUID REFERENCES shopify_orders(id);
ALTER TABLE brands ADD COLUMN IF NOT EXISTS template_name TEXT DEFAULT 'moon2';
ALTER TABLE brands ADD COLUMN IF NOT EXISTS template_language TEXT DEFAULT 'en';
ALTER TABLE brands ADD COLUMN IF NOT EXISTS use_template BOOLEAN DEFAULT true;
```

### 5. ุงุนูู Test Order ุฌุฏูุฏ

- Order ูู Shopify
- ุงูุฑุณุงูุฉ ูุชูุตู
- ุงุถุบุท "ุชุฃููุฏ"
- ูู ุญุงุฌุฉ ูุชุดุชุบู!

---

## ๐ ุงููุฑู ุจูู Temporary ู Permanent Token

### Temporary Token:
```
โ ููุชูู ูู 24 ุณุงุนุฉ
โ ูุญุชุงุฌ ุชุญุฏูุซ ูููู
โ ุณูู ุงูุญุตูู ุนููู
```

### Permanent Token:
```
โ ูุด ุจููุชูู ุฃุจุฏุงู
โ ูููุด ุชุญุฏูุซ ูููู
โ ุฃูุซุฑ ุฃูุงูุงู
โ๏ธ ูุญุชุงุฌ System User
```

---

## ๐ฏ ุงูู Flow ุงูุตุญูุญ

```
1. Order ูู Shopify
   โ
2. Shopify Webhook โ ุงูุณูุณุชู
   โ
3. ุงูุณูุณุชู ูุญุงูู Template "moon2"
   โ
4. ูู Token ุตุงูุญ โ ูุจุนุช Template โ
   ูู Token ููุชูู โ ูุจุนุช Interactive โ๏ธ
   โ
5. ุงูุฑุณุงูุฉ ุชูุตู ููุนููู
   โ
6. ุงูุนููู ูุถุบุท "ุชุฃููุฏ"
   โ
7. WhatsApp Webhook โ ุงูุณูุณุชู
   โ
8. ุงูุณูุณุชู ูุจุนุช ุฑุณุงูุฉ ุชุฃููุฏ
   โ
9. ูุญุฏุซ Shopify
   โ
10. ูู ุญุงุฌุฉ ุชุธูุฑ ูู ุงูู CRM
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### Error: Session has expired

**ุงูุณุจุจ:** Token ุงูุชูู

**ุงูุญู:**
1. ุงุญุตู ุนูู Permanent Token
2. ุฃู ุญุฏุซ Temporary Token ููููุงู

### ุงูุฑุณุงุฆู ูุด ุจุชุธูุฑ ูู ุงูู CRM

**ุงูุณุจุจ:** ูููุด real-time updates

**ุงูุญู:**
1. Refresh ุงูุตูุญุฉ
2. ุฃู ุงุณุชูู 2-3 ุซูุงูู

### Template ูุด ุจูุจุนุช

**ุงูุณุจุจ:** Template Name ุฃู Language ุบูุท

**ุงูุญู:**
1. ุชุฃูุฏ ูู Template Name: `moon2`
2. ุชุฃูุฏ ูู Language: `en`
3. ุชุฃูุฏ ูู Template ูุนุชูุฏ ูู Meta

---

## โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

**ุงููุดููุฉ ุงูุฑุฆูุณูุฉ:**
- Temporary Token ุจููุชูู ูู 24 ุณุงุนุฉ

**ุงูุญู ุงูุฏุงุฆู:**
- ุงุณุชุฎุฏู Permanent Token (Never expires)

**ุงูุฎุทูุงุช:**
1. โ ุงุญุตู ุนูู Permanent Token ูู Meta Business
2. โ ุญุฏุซู ูู ุงูู CRM
3. โ ูุนู Template "moon2"
4. โ ุงุนูู test order
5. โ ูู ุญุงุฌุฉ ูุชุดุชุบู ุจุฏูู ูุดุงูู!

---

## ๐ ููุงุญุธุงุช ูููุฉ

### Token Management:
- Temporary Token: ููู testing ููุท
- Permanent Token: ููู production

### Template vs Interactive:
- Template: ููุฏุฑ ูุจุนุช ุฃูู ูุฑุฉ
- Interactive: ูุญุชุงุฌ ุงูุนููู ูุจุฏุฃ ุงููุญุงุฏุซุฉ

### Fallback System:
- ูู Template ูุดูุ ุงูุณูุณุชู ุจูุณุชุฎุฏู Interactive ุชููุงุฆู
- ูุด ูุชุฎุณุฑ ุฃู ุฑุณุงูุฉ

---

**๐ ุจุนุฏ ูุง ุชุนูู Permanent Tokenุ ูุด ูุชุญุชุงุฌ ุชุญุฏุซ Token ุชุงูู!**

**๐ ุงููุธุงู ููุดุชุบู 24/7 ุจุฏูู ูุดุงูู!**

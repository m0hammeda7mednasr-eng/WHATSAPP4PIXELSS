# ๐ WhatsApp CRM System

ูุธุงู CRM ูุชูุงูู ูุฅุฏุงุฑุฉ ุทูุจุงุช Shopify ุนุจุฑ WhatsApp ูุน ุฑุณุงุฆู ุชูุงุนููุฉ ูุฃุฒุฑุงุฑ ุชุฃููุฏ/ุฅูุบุงุก

## โจ ุงููููุฒุงุช

- ๐ฑ **ุฑุณุงุฆู ุชูุงุนููุฉ ุจุฃุฒุฑุงุฑ** - ุฅุฑุณุงู ุฑุณุงุฆู WhatsApp ุจุฃุฒุฑุงุฑ (โ ุชุฃููุฏ / โ ุฅูุบุงุก)
- ๐จ **ุชุฎุตูุต ูุงูู** - ูู brand ููุฏุฑ ูุฎุตุต ุฑุณุงุฆูู ุงูุฎุงุตุฉ
- โฐ **ุชุฐููุฑ ุชููุงุฆู** - ุฅุฑุณุงู ุชุฐููุฑ ุจุนุฏ ุณุงุนุฉ ุฅุฐุง ูู ูุฑุฏ ุงูุนููู
- ๐ **ุชูุงูู Shopify** - ุฑุจุท ูุจุงุดุฑ ูุน ูุชุฌุฑ Shopify
- ๐ **ุชุชุจุน ุงูุทูุจุงุช** - ูุชุงุจุนุฉ ุญุงูุฉ ูู ุทูุจ (pending, confirmed, cancelled)
- ๐ฌ **ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช** - ูุงุฌูุฉ ุณููุฉ ูุฅุฏุงุฑุฉ ูุญุงุฏุซุงุช ุงูุนููุงุก
- ๐ **Multi-tenant** - ุฏุนู ุนุฏุฉ brands ูู ููุณ ุงููุธุงู

## ๐ ุงูุชุดุบูู ุงูุณุฑูุน

### ุงููุชุทูุจุงุช

- Node.js (v16 ุฃู ุฃุญุฏุซ)
- npm ุฃู yarn
- ุญุณุงุจ Supabase
- ุญุณุงุจ WhatsApp Business API
- ูุชุฌุฑ Shopify (ุงุฎุชูุงุฑู)

### ุงูุชุซุจูุช

1. **Clone ุงููุดุฑูุน:**
```bash
git clone https://github.com/m0hammeda7mednasr-eng/wahtsapp-.git
cd wahtsapp-
```

2. **ุชุซุจูุช Dependencies:**
```bash
npm install
```

3. **ุฅุนุฏุงุฏ Environment Variables:**
```bash
# ุงูุณุฎ ููู .env.example ุฅูู .env
copy .env.example .env

# ุนุฏู .env ูุถุน ุจูุงูุงุชู
```

4. **ุฅุนุฏุงุฏ Database:**
- ุงูุชุญ Supabase SQL Editor
- ุดุบู ููู `COMPLETE-DATABASE-SETUP.sql`

5. **ุชุดุบูู ุงููุธุงู:**
```bash
# ุงูุทุฑููุฉ ุงูุฃุณูู - ููู ูุงุญุฏ ูุดุบู ูู ุดูุก
START-COMPLETE-SYSTEM.bat

# ุฃู ูุฏููุงู:
# Terminal 1 - Backend
cd server
node webhook-server-simple.js

# Terminal 2 - Cron Job
cd server
node cron-reminder.js

# Terminal 3 - Frontend
npm run dev
```

## ๐ ููู ูุนูู ุงููุธุงู

### Flow ุงููุงูู:

```
๐ฆ Order ูู Shopify
    โ
๐ ูุญุต: ุงูุนููู ููุฌูุฏ ูู Databaseุ
    โ
๐ค ุฅุฑุณุงู ุฑุณุงูุฉ ุจุฃุฒุฑุงุฑ (โ ุชุฃููุฏ / โ ุฅูุบุงุก)
    โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ  ูุถุบุท ุชุฃููุฏ    โ   ูุถุบุท ุฅูุบุงุก   โ
โ       โ         โ       โ         โ
โ  ุฑุณุงูุฉ ุชุฃููุฏ   โ  ุฑุณุงูุฉ ุฅูุบุงุก   โ
โโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
    โ
โฐ ูู ูุง ุฑุฏ ุจุนุฏ ุณุงุนุฉ โ ุฑุณุงูุฉ ุชุฐููุฑ
```

## ๐ฏ ุงูุงุณุชุฎุฏุงู

### 1. ุชุฎุตูุต ุงูุฑุณุงุฆู

1. ุงูุชุญ: `http://localhost:5173`
2. ุงุฐูุจ ุฅูู: **Settings โ Template Settings**
3. ุนุฏู ุงูุฑุณุงุฆู ุงูุฃุฑุจุนุฉ:
   - ุฑุณุงูุฉ ุงูุนููุงุก ุงูููุฌูุฏูู
   - ุฑุณุงูุฉ ุงูุชุฃููุฏ
   - ุฑุณุงูุฉ ุงูุฅูุบุงุก
   - ุฑุณุงูุฉ ุงูุชุฐููุฑ
4. ุงุญูุธ

### 2. ุงููุชุบูุฑุงุช ุงููุชุงุญุฉ

| ุงููุชุบูุฑ | ุงููุตู | ูุซุงู |
|---------|-------|------|
| `{customer_name}` | ุงุณู ุงูุนููู | ุฃุญูุฏ ูุญูุฏ |
| `{order_number}` | ุฑูู ุงูุทูุจ | 1062 |
| `{products}` | ูุงุฆูุฉ ุงูููุชุฌุงุช | Teddy Sofa Love Seat |
| `{subtotal}` | ุงููุฌููุน ุงููุฑุนู | 19500.00 |
| `{shipping}` | ูุตุงุฑูู ุงูุดุญู | 118.00 |
| `{total}` | ุงูุฅุฌูุงูู | 22348.00 |
| `{address}` | ุนููุงู ุงูุชูุตูู | ุงููุงูุฑุฉุ ูุตุฑ |
| `{brand_name}` | ุงุณู ุงูุจุฑุงูุฏ | 4 Pixels |

### 3. ุฑุจุท Shopify

1. ุงุฐูุจ ุฅูู: **Settings โ Shopify Integration**
2. ุฃุฏุฎู ุจูุงูุงุช Shopify:
   - Shop URL
   - Client ID
   - Client Secret
3. ุงุถุบุท Connect
4. ุฃููู OAuth flow

## ๐งช ุงูุงุฎุชุจุงุฑ

### Test ุณุฑูุน:
```bash
TEST-INTERACTIVE-BUTTONS.bat
```

### Test ูุฏูู:
1. ุงุนูู order ูู Shopify
2. ุดูู WhatsApp - ูุงุฒู ุชูุฌู ุฑุณุงูุฉ ุจุฃุฒุฑุงุฑ
3. ุงุถุบุท โ ุชุฃููุฏ ุฃู โ ุฅูุบุงุก
4. ูุงุฒู ุชูุฌู ุฑุณุงูุฉ ุชุฃููุฏ/ุฅูุบุงุก

## ๐ ูููู ุงููุดุฑูุน

```
wahtsapp-main/
โโโ server/
โ   โโโ webhook-server-simple.js    # Backend ุงูุฑุฆูุณู
โ   โโโ cron-reminder.js             # Cron Job ููุชุฐููุฑ
โ
โโโ src/
โ   โโโ components/
โ   โ   โโโ ChatWindow.jsx           # ูุงุฌูุฉ ุงููุญุงุฏุซุงุช
โ   โ   โโโ TemplateSettings.jsx     # ุตูุญุฉ ุงูุชุฎุตูุต
โ   โ   โโโ MessageTemplates.jsx     # ุฅุฏุงุฑุฉ Templates
โ   โ   โโโ ShopifyOAuth.jsx         # ุฑุจุท Shopify
โ   โโโ context/
โ   โ   โโโ BrandContext.jsx         # ุฅุฏุงุฑุฉ Brands
โ   โโโ lib/
โ       โโโ supabaseClient.js        # Supabase Client
โ
โโโ COMPLETE-DATABASE-SETUP.sql      # Database Setup
โโโ START-COMPLETE-SYSTEM.bat        # ุชุดุบูู ูู ุดูุก
โโโ .env.example                     # ูุซุงู Environment Variables
โโโ README.md                        # ูุฐุง ุงูููู
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฑุณุงูุฉ ุจุฏูู ุฃุฒุฑุงุฑ
```bash
# ุชุฃูุฏ ูู Backend ุดุบุงู
cd server
node webhook-server-simple.js

# ูุงุฒู ุชุดูู ูู Console:
# "Message type: Interactive with buttons"
```

### ุงูุฃุฒุฑุงุฑ ูุง ุชุดุชุบู
```bash
# ุชุฃูุฏ ูู:
1. ngrok ุดุบุงู: ngrok http 3001
2. Webhook URL ุตุญูุญ ูู Meta
3. Verify Token = "whatsapp_crm_2024"
```

### ุงูุชุฐููุฑ ูุง ูุดุชุบู
```bash
# ุดุบู Cron Job:
cd server
node cron-reminder.js
```

## ๐ ุงููุซุงุฆู

- [ุฏููู ุงูุชูููุฐ ุงููุงูู](COMPLETE-IMPLEMENTATION-GUIDE.md)
- [ุฏููู ุงููุธุงู ุงูููุงุฆู](FINAL-SYSTEM-README.md)
- [ุฏููู Shopify Setup](SHOPIFY-SETUP-GUIDE.md)

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Frontend:** React + Vite
- **Backend:** Node.js + Express
- **Database:** Supabase (PostgreSQL)
- **WhatsApp:** WhatsApp Business API
- **E-commerce:** Shopify API

## ๐ ุงูุฃูุงู

- โ Environment variables ููุจูุงูุงุช ุงูุญุณุงุณุฉ
- โ Row Level Security (RLS) ูู Supabase
- โ OAuth 2.0 ูู Shopify
- โ Webhook verification
- โ `.gitignore` ูุญูุงูุฉ ุงููููุงุช ุงูุญุณุงุณุฉ

## ๐ License

MIT License - ุงุณุชุฎุฏู ุงููุดุฑูุน ุจุญุฑูุฉ

## ๐จโ๐ป ุงููุทูุฑ

Mohamed Ahmed Nasr

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ุงูุชุญ Issue ุฃู Pull Request

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุดูู [ุงุณุชูุดุงู ุงูุฃุฎุทุงุก](#-ุงุณุชูุดุงู-ุงูุฃุฎุทุงุก)
2. ุงูุฑุฃ [ุงููุซุงุฆู](#-ุงููุซุงุฆู)
3. ุงูุชุญ Issue ุนูู GitHub

---

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
